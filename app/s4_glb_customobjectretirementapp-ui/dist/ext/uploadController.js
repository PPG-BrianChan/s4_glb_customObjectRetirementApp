sap.ui.define(["sap/m/MessageBox","sap/m/MessageToast"],function(e,n){"use strict";function o(o){var t;function a(e){t&&t.getBeginButton().setEnabled(e)}function r(e){t.setBusy(e)}function i(){t&&t.close()}function u(n){e.error(n||"Upload failed")}function s(e){return sap.ui.core.Fragment.byId("uploadDialog",e)}return{onBeforeOpen:function(e){t=e.getSource();o.addDependent(t)},onAfterClose:function(e){o.removeDependent(t);t.destroy();t=undefined},onOk:function(e){r(true);var n=s("uploader");n.checkFileReadable().then(function(){n.upload()}).catch(function(e){u("The file cannot be read.");r(false)})},onCancel:function(e){i()},onTypeMismatch:function(e){var n=e.getSource().getFileType().map(function(e){return"*."+e}).join(", ");u("The file type *."+e.getParameter("fileType")+" is not supported. Choose one of the following types: "+n)},onFileAllowed:function(e){a(true)},onFileEmpty:function(e){a(false)},onUploadComplete:function(e){var t=e.getParameter("status");var s=e.getSource();s.clear();a(false);r(false);if(t>=400){var l=JSON.parse(e.getParameter("responseRaw"));u(l&&l.error&&l.error.message)}else{n.show("Uploaded successfully");o.refresh();i()}}}}return{showUploadDialog:function(e,n){this.loadFragment({id:"uploadDialog",name:"s4_glb_customobjectretirementapp-ui.ext.uploadDialog",controller:o(this)}).then(function(e){e.open()})}}});